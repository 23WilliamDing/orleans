---
layout: page
title: Multi-Cluster Support
---

# 多集群支持

Orleans V.1.3.0增加了对将多个Orleans集群联合到松散连接的*多簇*就像一个单一的服务。

多集群促进*地理分布*也就是说，在全世界的多个数据中心运行一个奥尔良应用程序更加容易。此外，多集群可以在单个数据中心内运行，以获得更好的故障和性能隔离。

所有机制的设计都特别注意（1）最小化集群之间的通信，和（2）让每个集群独立运行，即使其他集群失败或无法访问。

## 配置和操作

下面我们将介绍如何配置和操作多集群。

[**沟通**](GossipChannels.md)是的。集群通过集群中使用的同一个思洛存储器到思洛存储器的连接进行通信。为了交换状态和配置信息，集群使用gossip机制和gossip通道实现。

[**筒仓配置**](SiloConfiguration.md)是的。需要配置思洛存储器，以便它们知道自己属于哪个集群（每个集群由一个唯一的字符串标识）。此外，每个思洛存储器都需要配置连接字符串，以允许它们连接到一个或多个[八卦频道](GossipChannels.md)启动时。

[**多集群配置注入**](MultiClusterConfiguration.md). 在运行时，服务操作员可以指定和/或更改*多群集配置*，其中包含群集ID的列表，以指定哪些群集是当前多群集的一部分。这是通过调用任何集群中的管理粒度来完成的。

## 多簇晶粒

下面我们将介绍如何在应用程序级别使用多集群功能。

[**全局单实例粒度**](GlobalSingleInstance.md). 开发人员可以指示集群应该在何时以及如何根据特定的grain类协调其grain目录。这个`[全球照明]`属性意味着我们需要与在单个全局集群中运行orleans时相同的行为：即将所有调用路由到一个单一的grain激活。相反地，`[OneInstancePerCluster]`属性指示每个群集可以有自己的独立激活。如果集群之间的通信是不需要的，这是合适的。

**原木视图颗粒**  *（不在V.1.3.0中）*. 一种特殊类型的粒度，使用与事件源类似的新api来同步或持久化粒度状态。它可以用来自动和有效地同步集群之间和存储粮食的状态。因为它的同步算法可以安全地与可重入的颗粒一起使用，并且优化为使用批处理和复制，所以当一个颗粒在多个集群中频繁访问和/或当它被频繁写入存储器时，它可以比标准颗粒执行得更好。对日志视图粒度的支持还不是主分支的一部分。我们有一个预发行版，包括示例和一些文档[地理奥尔良分行](https://github.com/sebastianburckhardt/orleans/tree/geo-samples). 它目前正由一个早期采用者在生产中进行评估。
