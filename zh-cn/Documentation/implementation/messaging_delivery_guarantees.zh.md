---
layout: page
title: Messaging Delivery Guarantees
---

# 消息传递保证

奥尔良消息传递保证是**最多一次**， 默认。可选地，如果配置为在超时后重试，则奥尔良提供至少一次传送。

更详细地：

-   奥尔良中的每条消息都有自动超时（可以配置确切的超时）。如果答复未按时到达，则返回的Task会中断，并出现超时异常。

-   可以将Orleans配置为在超时后自动重试。默认情况下，它不会自动重试。

-   当然，应用程序代码也可以选择在超时时重试。

如果将奥尔良系统配置为不执行自动重试（默认设置），并且应用程序未重新发送，**奥尔良最多提供一次消息传递**。一条消息将被发送一次或完全不发送。**它永远不会被交付两次。**

在具有重试功能的系统中（通过运行时或应用程序），消息可能多次到达。奥尔良目前不采取任何措施来持久存储哪些消息已经到达并禁止第二次发送。（我们相信这会非常昂贵。）因此，在重试系统中，奥尔良最多不能保证一次交货。

**如果您无限期地重试**，**消息最终将到达**，因此提供了至少一次的交货保证。注意，“将最终到达”是运行时需要保证的。即使您继续重试，它也不是免费的。奥尔良提供最终交付方式，因为谷物永远不会进入任何永久性失效状态，而失效的谷物最终将在另一个筒仓中重新激活。

**所以总结一下**：在不重试的系统中，奥尔良保证最多发送一次消息。在无限次重试的系统中，奥尔良保证至少一次（并且不保证最多一次）。

**注意**： 在里面[奥尔良技术报告](http://research.microsoft.com/pubs/210931/Orleans-MSR-TR-2014-41.pdf)我们无意中只提到了第二个选项，即自动重试。我们忘记提及默认情况下不重试，奥尔良最多提供一次交付。
