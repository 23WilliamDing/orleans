---
layout: page
title: Orleans Architecture - Principles and Approach I
---

既然Orleans（最终）可以作为开源使用，那么了解促成Orleans背后的设计决策的目标和原则很重要，这样新的变化要么适合该框架，要么明确地并有意地修改那些目标和原则。

在我加入Orleans项目时，我们同意目标是建立一个框架，使主流开发人员可以轻松构建可扩展的分布式（云）应用程序。要对此进行细分：

-   **目标读者不应排除尚未完成分布式系统开发的程序员**。我们希望使所有开发人员，无论是云专家还是云初学者，都可以专注于他们的应用程序逻辑和功能（即真正提供业务价值的内容），而不是通用的分布式系统问题。

-   **目的是让他们轻松构建云应用程序**。轻松地意味着，他们不必比绝对需要多考虑分配。轻松地也意味着Orleans应该尽可能向开发人员展示熟悉的外观；在.NET上下文中，这意味着C＃对象和接口。

-   **这些应用程序应该是*“默认情况下可扩展”***。由于我们的目标用户不一定是分布式系统专家，因此我们希望为他们提供一个框架，使他们无需明确考虑即可构建可扩展的应用程序。这意味着该框架必须为它们做出很多决定，以确保可接受的可扩展性程度，即使这意味着可扩展性并非对每个应用程序都是最佳的。

我们通过一系列架构原则对这一目标进行了补充：

-   **我们专注于80％的案例**。当然，有些应用程序不适合Orleans使用；没关系。有一些Orleans适合的应用程序，但是通过Orleans不允许的大量手动调整，您可以在其中获得更好的性能。也可以Orleans的80％可以很好地拟合并在许多有趣的应用程序上表现出色，我们宁愿80％上做得很好，也不愿99％上做得不好。


-   **可扩展性至关重要**。如果可以更好地进行扩展，我们将权衡原始性能。


-   **可用性至关重要**。云应用程序应该像实用程序：随时随地都可以使用。


-   **检测并修复问题**，不要以为您可以100％阻止它们。在云规模上，坏事经常发生，甚至不可能发生的坏事也很少发生。这导致了我们通常被称为“面向恢复的计算”，而不是试图做到容错。我们的经验表明，容错能力很弱，而且常常是虚幻的。即使是经过数学验证的协议也无法防止内存或磁盘控制器中的随机位翻转在报告成功时失败，这是我在职业生涯中已经看到的真实示例。

以上导致我们采取了某些做法：

-   **API优先设计**：如果我们不知道如何向开发人员公开功能，那么我们就不会构建它。当然，最好的方法是使功能完全不接触开发人员。

-   **轻松做正确的事**：要使事情尽可能简单（但不要简单），如果螺丝刀是正确的工具，请不要用锤子砸。正如我们的早期采用者之一所说的那样，我们试图帮助客户“落入成功之坑”。如果有一个标准模式可以很好地适合80％的应用程序，那么不必担心启用所有可能的替代方法。Orleans对异步的拥护就是一个很好的例子。

-   **使开发人员轻松扩展框架而不破坏框架**。自定义序列化和持久性提供程序就是其中的几个示例。某种自定义任务计划扩展将是反示例。

-   **遵循最少惊喜的原则**：尽可能使事物熟悉，但一切都应按照外观进行。

下一篇文章将开始将这些原理应用于当前的Orleans设计，并逐步探究我们做出的某些特定决策的动机。

谢谢阅读！

艾伦·盖勒

*艾伦·盖勒，<http://research.microsoft.com/en-us/people/ageller/>，在Microsoft Research从事量子计算。从2008年到2012年，他是Orleans的主要架构师之一。在此之前，从2004年到2008年，他是Amazon Web Services的平台架构师，在此之前，他在电信和金融服务领域构建了各种大型生产分布式系统。*
